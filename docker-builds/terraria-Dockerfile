FROM debian:bookworm-slim
RUN apt-get update && apt-get install -y wget unzip libcurl4 nodejs npm && rm -rf /var/lib/apt/lists/*
WORKDIR /data
EXPOSE 7777/tcp 7777/udp
COPY --chmod=755 terraria-entrypoint.sh /entrypoint.sh
COPY runner.js /runner.js
USER steam
ENV GAME_COMMAND="bash /entrypoint.sh"
LABEL hostmachine.runner="true"
ENTRYPOINT ["node", "/runner.js"]
